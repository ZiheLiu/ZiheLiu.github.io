---
title: 1. 应用层
date: 2020-03-05 18:49:00
categories:
	- network
tags:
	- network
typora-root-url: ../
---

# 5层网络模型

1. 应用层
2. 传输层
3. 网络层
4. 数据链路层
5. 物理层

# DNS

全称：Domain Name System。

作用：把主机域名转化为IP地址。

一般最多512字节（因为最开始的MTU比较小）

## DNS是

1. 一个由分层的DNS服务器实现的分布式数据库。

2. 一个使得主机能够查询分布式数据库的应用层协议。

## 为什么不是单点的

- 单点故障。
- 通信容量限制。
- 远距离的延迟。

## 三种DNS服务器

- 根DNS服务器。共13个，每个可能是冗余存储的。
- 顶级域服务器。org、com、edu等。
- 权威DNS服务器。在因特网上可访问的主机，要提供公共可访问的DNS记录。

## 递归和迭代

- 递归：DNS客户端把解析名称的请求发给DNS服务器后，DNS服务器会把找到的ip地址返回给客户端。如果DNS服务器在自己这里没有找到，会代替客户端去访问其他的DNS服务器。

- 迭代：DNS服务器没有找到后，客户端基于DNS服务器的应答，自己去和其他DNS服务器请求。

##DNS解析的流程

> [DNS解析的过程是什么](https://www.zhihu.com/question/23042131/answer/66571369)

1. 对于 `www.baidu.com`。DNS客户端首先检查本地hosts文件是否有对应的映射关系，有则返回对应的IP地址。

2. 把解析请求发给本地DNS服务器（在本地操作系统TCP/IP的参数设置中）。如果要解析的域名包含在本地DNS服务器的配置资源中，则返回对应的IP。
3. 本地DNS服务器把请求发往13根DNS服务器。根服务器返回对应的顶级DNS服务器.com的IP地址。
4. 本地DNS服务器向顶级DNS服务器.com发请求。如果.com自己无法解析，它会去找管理.com的**下一级域名**地址（.baidu）的DNS服务器的地址，返回。
5. 本地DNS服务器向.baidu DNS服务器发请求，重复步骤4，一直到找到为止。

DNS客户端向本地DNS服务器发的请求是递归查询，DNS服务器之间是迭代查询。

如果是转发模式，在步骤2之后，本地DNS服务器会向上一级DNS服务器请求转发，一直向上转发，一直到可以解析为止。？如何知道上一级的DNS服务器的地址？TODO

## 为什么DNS使用UDP

> [为什么DNS使用UDP而不是TCP](https://www.zhihu.com/question/310145373/answer/583869215) 

DNS需要传输的数据量少，使用UDP可以加快传输速度，并且迭代查询可能会查询多次。

现在的DNS为了携带证书验证，数据量变大，会使用TCP。